
swagger: '2.0'
info:
  title: RSpace Inventory API
  description: >
    Welcome to the RSpace Inventory API.

  version: "1.103"
  termsOfService: >-
    Currently unrestricted, subject to usage limits returned in X-Rate-Limit headers.
  license:
    name: Apache2 License
    url: 'https://www.apache.org/licenses/LICENSE-2.0'
  contact:
    name: RSpace API Support
    email: support@researchspace.com
basePath: /api/inventory/v1
produces:
  - application/json
consumes:
  - application/json
security:
  - ApiKeySecurity: []
  - OAuthJWT: []
securityDefinitions:
  ApiKeySecurity:
    description: Authentication system based on API Key.
    type: apiKey
    in: header
    name: apiKey
  OAuthJWT:
    description: |
      ##### Please note: you must change 'Client credentials location' from \"Authorization header\" to \"Request body\".
    type: oauth2
    flow: password
    tokenUrl: /oauth/token
    scopes:
      all: Grants access to all API
paths:
  /workbenches:
    get:
      summary: Get all Workbenches visible to the current User
      description: >
        Returns the list with info objects about all workbenches that user can read.
      produces:
        - application/json
      tags:
        - Workbench
      responses:
        '200':
          description: A list of ContainerInfo objects.
  '/workbenches/{workbenchId}':
    get:
      summary: Retrieve a specific Workbench by its ID
      description: >
        Gets details of a specific workbench container, including the summary of its content. The actual content
        will be present in `locations` property, but only if request is made with `includeContent` parameter set to true.
      produces:
        - application/json
      tags:
        - Workbench
      parameters:
        - $ref: '#/parameters/workbenchIdParam'
        - in: query
          name: includeContent
          description: if set to `true` the `locations` property is populated with content of the workbench
          default: false
          type: boolean
      responses:
        '200':
          description: A Workbench
          schema:
            $ref: '#/definitions/Container'
        '404':
          $ref: '#/responses/NotFound'

  /samples:
    get:
      summary: Get all Samples visible to the current User
      description: >
        Returns a paginated list of summary information about Samples visible to the current user.

        | Request | Explanation |

        | --- | --- |

        /samples?pageSize=10| Gets first 10 samples

        /samples?ownedBy=user1a| Gets page of samples owned by user1a (assuming current user can see them)

      produces:
        - application/json
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/ownedByParam'
        - $ref: '#/parameters/deletedItemsParam'
        - $ref: '#/parameters/pageNumberParam'
        - $ref: '#/parameters/pageSizeParam'
        - $ref: '#/parameters/orderByParam'
      responses:
        '200':
          description: A list of SampleInfo objects.
    post:
      summary: Create a new Sample with one or more SubSamples
      description: >-

        Creates a new Sample in RSpace Inventory.

        Content body is a JSON object defining properties of the sample:
         - `name` is the only required property.
         - `fields` array contains values for fields coming from the sample template. The ordering is important as the content is assigned to  subsequent template fields.
         - All fields except Choice and Radio fields, fields are defined as `{"content": <value>}`objects, where `<value>` is appropriate for the field type.  Radio and Choice fields are defined as `"selectedOptions": ["<option1>", "<option2>"...]`
         - If `templateId` is set, `fields` can be omitted, in which case the sample will be created using default values supplied by the template (if any).
         - For Attachment fields, the `content` field is used to describe the attached file, and it is not possible to attach the actual file in this request. To attach the file, use `/files POST` setting `parentGlobalId` to the Id of the field once this sample is created.
         - `extraFields` array contains values for additional fields that can be added independently from template fields. The order of the fields in array is not important, but each field need to specify `type` and `name`.

        Optionally `newSampleSubSamplesCount` field can be set to create multiple default subsamples for a sample. If sample's `quantity` is provided, it will be divided to calculate quantity of each default subsample.
        By default subsamples are placed in user's Workbench, but if `newSampleSubSampleTargetLocations` array is provided it'll override target location for each created default subsample.

        ## Examples of the request body

        | Body | Explanation |

        | --- | --- |

        `{ "name": "Generic sample" }` | Creates a Sample named "Generic sample", based on Basic Sample template, with empty content, and `sampleSource` default of 'LAB_CREATED'.

        `{ "name": "Sample with image", "newBase64Image":
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQIAAAESAQMAAAAsV 0mIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAAJcEhZcwAADsMAAA7 DAcdvqGQAAABWSURBVGje7dUhDsAgEETR5VYcv8fCgUEg1rXdhOR9/ZKRE5LO2kwbH4snHe8EQRAEQWxR88g+m yAIgiDeCo9MEARBEP+Lmr/1yARBEARxhyj5fSktYgFPS1k85Tqe JQAAAABJRU5ErkJggg==" }` | As previous example, but includes an image of the sample in Base64.

        `{ "name": "Sample with default subsamples", "newSampleSubSamplesCount": 3, "newSampleSubSampleTargetLocations":
        [ { "containerId": 11, "location": {} }, { "containerId": 21, "location": { "coordX": 1, "coordY": 1} }, { "containerId": 31, "location": { "id": 32 } } ] }`
        | Creates a sample with three default subsamples, each placed within a different container. When placing into LIST container (with id=11) location should be empty;
        when placing within GRID container (with id=21) grid coordinates have to be provided; when placing in VISUAL container (with id=31), the id of a target location must be provided.

        `{ "name": "My Sample", "tags": [{"value":"api","uri":"http://uri","ontologyName":"name","ontologyVersion":"version"}], "quantity": { "unitId" : "3", "numericValue" : "50" }, "subSamples": [ { "name": "subSample A", "parentContainers": [ { "id": 11 } ] },
                          { "name": "subSample B", "parentContainers": [ { "id": 11 } ] } ] }`
        | Creates a sample named "My Sample", with 50ml quantity and a 'api' tag, with two subsamples placed inside a container with id = 11.

        `{ "name": "My Sample", "tags": [{"value":"api","uri":"http://uri","ontologyName":"name","ontologyVersion":"version"}], "quantity": { "unitId" : "3", "numericValue" : "50" }, "subSamples": [ { "name": "subSample A", "parentContainers": [ { "id": 11 } ] },
                          { "name": "subSample B", "parentContainers": [ { "id": 11 } ] } ] }`
        | Creates a sample named "My Sample", with 50ml quantity and a 'api' tag, with two subsamples placed inside a container with id = 11.

        `{ "name": "My Sample", "tags": [{"value":"api","uri":"http://uri","ontologyName":"name","ontologyVersion":"version"}], "quantity": { "unitId" : "3", "numericValue" : "50" },"expiryDate":"2021-06-30", "subSamples": [ { "name": "subSample A", "parentLocation": { "id": 21 } } ] }`
        | Creates a sample named "My Sample", with 50ml quantity and a 'api' tag, with an expiration date, with one subsample named "subSample A" placed inside a container location with id = 21.

        `{ "name": "My Refrigerated Sample", "quantity": { "unitId" : "3", "numericValue" : "10" }, "newSampleSubSamplesCount": 2,
          "storageTempMin" : { "numericValue" : 3.00, "unitId" : 8 },
          "storageTempMax" : { "numericValue" : 5.00, "unitId" : 8 }
        }`
        | Creates 10ml sample with a specified storage temperature. The sample will contain two subsamples, 5ml each.

        `{ "name": "My Sample", "sampleSource": "VENDOR_SUPPLIED", "templateId": 1 }` | Creates a new Sample based on template with id = 1, non-default value for 'sampleSource', with default field values and no subsamples.

        `{ "name": "My Sample",  "templateId": 22, "fields": [{}, {}, {"content": "some data"}] }` | Creates a new Sample based on template with id = 22, with default field values  for the first two fields and explicit value for the 3rd field.


        `{ "name": "My Complex API Sample #1", "description": "my description", "templateId": 2,
          "fields": [
              { "content": "5.0" },
              { "content": "2020-05-13" },
              { "content": "a string"},
              { "content": "<p>MyText content</p>" },
              { "content": "https://www.researchspace.com" },
              { "content": "SD12345" },
              { "content": "description of an attached file" },
              { "selectedOptions": ["option1"] },
              { "selectedOptions": ["optionA"] }
          ],
          "extraFields": [ { "name": "my sample extra field", "type": "text", "content" :"extra sample content (text)" } ],
          "subSamples": [ { "name": "Subsample of My Complex Api Sample",
            "extraFields": [ { "name": "my subsample extra field", "type": "number", "content": "5.15" } ],
            "notes": [ { "content": "my note" } ] } ] }`
         | Creates a complex Sample based on a specific template (with id `2`) which contains 9 fields of various types. In order these are number,date,string,text,uri,reference,attachment,radio,choice.
      tags:
        - Samples
      parameters:
        - in: body
          name: sample
          description: 'A sample, with optional fields and subsamples'
          required: true
          schema:
            $ref: '#/definitions/Sample'
      responses:
        '201':
          description: >-
            Success. Returned object represents a created sample.
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'
  '/samples/{sampleId}':
    get:
      summary: Retrieve a complete Sample by ID
      description: |
        Gets a complete Sample, including summary information about subSamples.
      produces:
        - application/json
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
      responses:
        '200':
          description: A Sample
          schema:
            $ref: '#/definitions/Sample'
        '404':
          $ref: '#/responses/NotFound'
    put:
      summary: Update a Sample
      description: |
        Updates an existing Sample. The endpoint allows updating properties of the sample and its fields, but not those of its subsamples - these should be updated through the separate `/subSamples` endpoint. Also, this endpoint won't change the owner of the sample - use `/samples/{sampleId}/actions/changeOwner` endpoint for transferring the sample to another user.

        Extra fields belonging to the sample can be updated, added and deleted as a part update action. To create a new extra field, include its definition with additional `newFieldRequest` property set to `true`. To delete an extra field, include a `deleteFieldRequest` property set to `true`.

        The request body should be a JSON object that specifies the details of the update, and must be parsable into `#/definitions/Sample` model.

        This endpoint requires `UPDATE` permission to the Sample.

        ## Examples of the request body

        | Body | Explanation |
        | --- | --- |
        `{}` | Update Sample's last modified date, but doesn't change any of the properties.
        `{ "name": "new name", "tags": [{"value":"new tags","uri":"http://uri","ontologyName":"name","ontologyVersion":"version"}] }` | Updates sample 'name' and 'tags' properties
        `{ "fields": [ { "id": 11, "content": "2020-01-09" } ] }` | Updates sample field (with id 11) with new content
        `{ "extraFields": [ { "id": 21, "content": "...updated" }, { "newFieldRequest": true, "name": "my field", "content": "new field" }, { "id": 22, "deleteFieldRequest": true } ] }` | Updates extra field 21 with new content, deletes extra field 22, and creates new text extra field
        `{ "identifiers": [ { "id": 23, "title": "updated title", "publisher": "ResearchsSpace", "publicationYear": 2023 } ] }` | Update title property of existing sample's IGSN identifier with id 23
        `{ "sharingMode": "WHITELIST", "sharedWith": [ {"group": { "uniqueName": "user3GroupOiCr" }, "shared": true} ] }` | Update sharing setup of the sample, so it's now shared only with user3GroupOiCr

      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
        - $ref: '#/parameters/sampleBodyParam'
      responses:
        '200':
          description: >-
            Success - sample is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

    delete:
      summary: Delete a Sample
      description: |
        Mark sample as deleted, so it won't appear in Inventory UI and default listings. All subsamples belonging to the sample will also be deleted.

        Delete action will stop by default, if subsamples belonging to deleted sample are stored inside container(s). This can be changed by passing "forceDelete" query parameter set to `true`. The default behaviour is so the UI can prompt the user that deleting sample will cause removal of subsamples from their current containers, and ask them for confirmation.

        This action requires `UPDATE` permission to the Sample.

      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
        - in: query
          name: forceDelete
          description: Proceed with sample deletion even if there are subsamples currently stored inside containers.
          default: false
          type: boolean
      responses:
        '204':
          description: No content

  '/samples/{sampleId}/restore':
    put:
      summary: Restore deleted Sample
      description: |
        Restores deleted sample. The subsamples that were active during sample deletion are also restored,
        and moved to user's Workbench.
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
      responses:
        '200':
          description: >-
            Success - sample is restored.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/samples/{sampleId}/image/{timestamp}':
    get:
      summary: 'Gets a full image connected to the Sample'
      description:
        Returns full image uploaded for the sample.
      produces:
        - image/png
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/samples/{sampleId}/thumbnail/{timestamp}':
    get:
      summary: 'Gets a thumbnail image connected to the Sample'
      description:
        Returns a reduced-size image uploaded for the sample.
      produces:
        - image/png
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/samples/{sampleId}/actions/changeOwner':
    put:
      summary: Transfer the Sample to the new owner
      description: |
        Updates 'owner' field of existing Sample. No other changes to the sample are processed. Use  `/samples/{sampleId}` PUT endpoint to update other fields of the sample.

        This action requires `CHANGE_OWNER` permission to the sample.

        ## Examples of the request body

        | Body | Explanation |
        | --- | --- |
        `{ "owner": { "username": "newOwner" } }` | Changes owner of a sample to newOwner (requires `CHANGE_OWNER` permission). |

      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
        - $ref: '#/parameters/sampleBodyParam'
      responses:
        '200':
          description: >-
            Success - sample is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/samples/{sampleId}/actions/duplicate':
    post:
      summary: Duplicate a Sample
      description: |

        Generates a deep copy of the sample, including fields, extra fields, images but excluding subsamples. A single subsample will be created with the same quantity as the total quantity of the original sample.

        E.g. original sample S has 10 subsamples of 5ml. After duplication, S-copy will have 1 subsample of 50ml. You can then use `subSample/{id}/actions/duplicate` or  `subSample/{id}/actions/split` to edit the new subsample amounts.

        This action requires `UPDATE` permission to the Sample.
      produces:
        - application/json
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
      responses:
        '201':
          description: The new, duplicate sample.
          schema:
            $ref: '#/definitions/Sample'

  '/samples/{sampleId}/actions/updateToLatestTemplateVersion':
    post:
      summary: Update the Sample to match latest definition of its connected Sample Template
      description: |
        If the Sample Template used to create a Sample is updated, the changes only affect future samples created from that template. Calling this endpoint for a given sample will modify it according to changes in the latest template, e.g. will add or rename the field, add new possible radio field option, etc. If template changes cannot be applied to the sample, an error will be returned and sample will not be updated.

        If the template update is non-destructive, e.g. a field was added or renamed, a new radio field option was added etc., the previously created sample can be always updated. Under certain conditions it is also possible to propagate potentially destructive changes to the template, e.g. field deletion or removing radio field option. As a general rule that is possible if the sample doesn't have any content in deleted field.

        If the latest template has new fields that the sample doesn't, these fields are added to the sample, but without setting any default value (even if template field has one). That's to avoid the situation where some samples have field values that user didn't explicitly set nor confirm.

        User must have UPDATE permissions for the sample, and read permissions for the template to run the update action.

        ### Algorithm for for updating sample (S) to latest template version (T)
        - check difference between T and S properties:
          - if T has new subsample alias, update subsample alias of S
        - for each S field check difference between S field and connected T field:
          - if the connected T field was deleted:
            - if the S field value is empty, delete the S field
            - if the S field value is not empty, REJECT WHOLE UPDATE ATTEMPT
          - if the connected T field was renamed, rename the S field
          - if the connected T field was reordered (i.e. moved up or down), reorder the S field
          - if the connected T field is radio/choice, and there is new option set:
            - if the S field value is found within new T option set, update the S field option set
            - if the S field value is not found with new T option set, REJECT WHOLE UPDATE ATTEMPT
        - for each T field, if there is no connected S field (i.e. it's a new field added to T):
          - add the field to S, with empty value (even if T field has a default value, it shouldn't be used)

      produces:
        - application/json
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
      responses:
        '200':
          description: The sample updated to latest version of the template.
          schema:
            $ref: '#/definitions/Sample'

  '/samples/{sampleId}/revisions':
    get:
      summary: 'Gets historical revisions of the Sample'
      description:
        Returns list of historical revisions saved for the Sample, starting from the earliest revision.
      produces:
        - application/json
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
      responses:
        '200':
          description: A list of revision information objects.

  '/samples/{sampleId}/revisions/{revisionId}':
    get:
      summary: 'Gets historical revision of the Sample'
      description:
        Returns full details of a historical revision saved for the Sample.
      produces:
        - application/json
      tags:
        - Samples
      parameters:
        - $ref: '#/parameters/sampleIdParam'
        - $ref: '#/parameters/revisionIdParam'
      responses:
        '200':
          description: A Sample, as it was at a requested historical revision
          schema:
            $ref: '#/definitions/Sample'
        '404':
          $ref: '#/responses/NotFound'

  '/samples/validateNameForNewSample':
    get:
      summary: Check if given string is valid for naming a new Sample
      tags:
        - Samples
      consumes:
        - text/plain
      parameters:
        - in: query
          name: name
          type: string
          required: true
          description: Name to check.
      responses:
        '200':
          description: JSON object with 'valid' field (true/false) and 'message' field if there is a problem with a name
          schema:
            type: string

  /subSamples:
    get:
      summary: Get all SubSamples visible to the current User
      description: >
        Returns a paginated list of summary information about SubSamples visible to the current user.

         | Request | Explanation |

         | --- | --- |

         /subSamples?pageSize=10| Gets first 10 subSamples

         /subSamples?ownedBy=user1a| Gets page of subSamples owned by user1a (assuming current user can see them)

      produces:
        - application/json
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/ownedByParam'
        - $ref: '#/parameters/deletedItemsParam'
        - $ref: '#/parameters/pageNumberParam'
        - $ref: '#/parameters/pageSizeParam'
        - $ref: '#/parameters/orderByParam'
      responses:
        '200':
          description: A list of SubSampleInfo objects.

  '/subSamples/{subSampleId}':
    get:
      summary: Retrieve a SubSample by ID
      description: >
        Retrieve a complete SubSample by ID.
      produces:
        - application/json
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
      responses:
        '200':
          description: A SubSample
          schema:
            $ref: '#/definitions/SubSample'
        '404':
          $ref: '#/responses/NotFound'
    put:
      summary: Update a SubSample with given ID
      description: |
        Updates existing subsample with provided id. The request body should be a JSON object that specifies the details of the update, and must be parsable into `#/definitions/SubSample` model.

        This action requires `UPDATE` permission to the SubSample.

        ## Extra fields

        Extra fields belonging to the subsample can be updated, added and deleted as a partial
        update action. To create a new extra field, include its definition with additional
        `newFieldRequest` property set to `true`. To delete an extra field, include a
        `deleteFieldRequest` property set to `true`.

        ## Notes

        Subsample notes cannot be updated. To add a note to the subsample send POST
        request to the `/subSamples/{subSampleId}/notes` endpoint.

        ## Moving a subsample

        To move a subsample to another container, provide the target container as a first element in `parentContainers` array. For grid/image container you'll also have to provide details of target location in `parentLocation` field: for grid container the provided provided location needs to specify target coordinates, for image container it needs to specify location id.

        When moving multiple items use `/bulk` endpoint with `"operationType": 'MOVE'`.

        ## Examples of the request body

        | Body | Explanation |

        | --- | --- |

        `{ "name": "new Name" }` | Updates a name of the subsample.

        `{"quantity": { "numericValue": 7.32, "unitId": 3 }}` | Updates the subsample's quantity. Note that the unitId must be compatible (volume, mass, etc) with the original quantity


        `{ "extraFields": [ { "id": 21, "content": "...updated" }, { "newFieldRequest": true, "name": "my field", "content": "new field" }, { "id": 22, "deleteFieldRequest": true } ] }` | Updates extra field 21 with new content, deletes extra field 22, and creates new text extra field
        
        `{  "identifiers": [ { "id": 31, "geoLocations": [ { "geoLocationPlace": "testPlace", "geoLocationPoint": { "pointLatitude": "1.0", "pointLongitude": "2.0" }, 
            "geoLocationBox": { "eastBoundLongitude": "-68.211", "northBoundLatitude": "42.893", "southBoundLatitude": "41.090", "westBoundLongitude": "-71.032" },
            "geoLocationPolygon": [ { "polygonPoint": { "pointLatitude": "41.991", "pointLongitude": "-71.032" } },
              { "polygonPoint": { "pointLatitude": "42.893", "pointLongitude": "-69.622" } }, { "polygonPoint": { "pointLatitude": "41.991", "pointLongitude": "-68.211" } },
              { "polygonPoint": { "pointLatitude": "41.090", "pointLongitude": "-69.622" } }, { "polygonPoint": { "pointLatitude": "41.991", "pointLongitude": "-71.032" } } ],
            "geoLocationInPolygonPoint": { "pointLatitude": "42.0", "pointLongitude": "-70.1" }
         } ] } ] }` 
        | Updates IGSN identifier with details of geoLocation

        `{ "parentContainers": [ { "id": "11"} ] }`
        | Move this subsample into list container 11, without specifying exact location (this will work for list containers)

        `{ "parentContainers": [ { "id": "16"} ],  "parentLocation" : { "coordX": 2, "coordY": 3 } }`
        | Move this subsample into grid container 16, with specifying location coordinates (this will work for grid containers)

        `{ "parentLocation": { "id": "21"} } }`
        | Move this subsample into container location 21 (this will work if location 21 belongs to an image container)

      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
        - $ref: '#/parameters/subSampleBodyParam'
      responses:
        '200':
          description: >-
            Success - subsample is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
    delete:
      summary: Delete a SubSample
      description: |
        Mark subsample as deleted, so it won't appear in Inventory UI and default listings. The subsample will also be removed from its current location.

        This action requires `UPDATE` permission to the SubSample.
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
      responses:
        '204':
          description: No content

  '/subSamples/{subSampleId}/restore':
    put:
      summary: Restore deleted SubSample
      description: |
        Restores deleted subsample and moves it to  user's Workbench.
        If the parent sample of restored subsample is also deleted, it will be restored, but without restoring any other subsamples.
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
      responses:
        '200':
          description: >-
            Success - subsample is restored.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/subSamples/{subSampleId}/notes':
    post:
      summary: Create a new SubSample note.
      description: >-

        The POST request sent to `/subSamples/{subSampleId}/notes` endpoint creates
        a new subsample note.

        The request body should be a JSON object that specifies the details  of
        the note that should be created and must be parsable into
        #/definitions/SubSampleNote model.

        ## Examples of the request body

        | Body | Explanation |

        | --- | --- |

        `{ "content" : "subsample note #1" }` | Creates a new note with some content.

      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
        - $ref: '#/parameters/subSampleNoteBodyParam'
      responses:
        '201':
          description: >-
            Success - new note was added. Returned object represents latest subsample.
          schema:
            $ref: '#/definitions/SubSample'
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'

  '/subSamples/{subSampleId}/parentSample':
    get:
      summary: Retrieve a parent Sample
      description: >
        Retrieve a complete parent Sample using ID of a child subsample.

        Returns Sample in the same format as `/samples/{sampleId}` endpoint.
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
      responses:
        '200':
          description: A Sample
          schema:
            $ref: '#/definitions/Sample'
        '404':
          $ref: '#/responses/NotFound'

  '/subSamples/{subSampleId}/actions/duplicate':
    post:
      summary: Duplicate a subsample
      description: |
        Generates a deep copy of the subsample.

        This action requires `UPDATE` permission to the SubSample.
      produces:
        - application/json
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
      responses:
        '201':
          description: The new, duplicate subsample.
          schema:
            $ref: '#/definitions/SubSample'

  '/subSamples/{subSampleId}/actions/split':
    post:
      summary: Splits a subsample
      description: >-

        Generates a deep copy of the subsample, either distributing quantity equally amongst copies, or setting the quantity of each the same as the original, depending on whether `split` is true or false.


        This action requires `UPDATE` permission to the SubSample.

        ## Examples of request body:

        | Body | Explanation |

        | --- | --- |

        `{ "numSubSamples" : "2", "split": "false" }` | Creates 1 duplicate, with the same quantity as the original - this is identical to calling `/actions/duplicate` |

        `{ "numSubSamples" : "10", "split": "true" }` | Creates 9 duplicates, distributing the  original quantity equally. If you had 1 subsample of 100ml, this will result 10 subsamples of 10ml each - the original, plus 9 new duplicates. |

        `{ "numSubSamples" : "10", "split": "false" }` | Creates 9 duplicates, duplicating quantity. If you had 1 subsample of 100ml, this will result in 10 subsamples of 100ml each - the original, plus 9 new duplicates. |
      produces:
        - application/json
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
        - $ref: '#/parameters/subSampleSplitParam'
      responses:
        '201':
          description: A list of  duplicates subsamples.
          schema:
            $ref: '#/definitions/SubSample'

  '/subSamples/{subSampleId}/image/{timestamp}':
    get:
      summary: 'Gets a full image connected to the SubSample'
      description:
        Returns full image uploaded for the sample.
      produces:
        - image/png
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/subSamples/{subSampleId}/thumbnail/{timestamp}':
    get:
      summary: 'Gets a thumbnail image connected to the SubSample'
      description:
        Returns a reduced-size image uploaded for the subsample.
      produces:
        - image/png
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/subSamples/{subSampleId}/revisions':
    get:
      summary: 'Gets historical revisions of the SubSample'
      description:
        Returns list of historical revisions saved for the SubSample, starting from the earliest revision.
      produces:
        - application/json
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
      responses:
        '200':
          description: A list of revision information objects.

  '/subSamples/{subSampleId}/revisions/{revisionId}':
    get:
      summary: 'Gets historical revision of the SubSample'
      description:
        Returns full details of a historical revision saved for the SubSample.
      produces:
        - application/json
      tags:
        - SubSamples
      parameters:
        - $ref: '#/parameters/subSampleIdParam'
        - $ref: '#/parameters/revisionIdParam'
      responses:
        '200':
          description: A SubSample, as it was at a requested historical revision
          schema:
            $ref: '#/definitions/SubSample'
        '404':
          $ref: '#/responses/NotFound'


  /sampleTemplates:
    get:
      summary: 'List Sample Templates visible to the current user'
      description: >
        Provides a paginated list of Sample Templates visible to the current user. That includes pre-defined global templates available for every RSpace user.

        This endpoint can be used to retrieve the IDs of the templates from which Samples can be created.

        Sample templates have almost identical data attributes to Samples themselves. Templates can be distinguished by `template=true` property.

        List of returned templates can be limited to templates belonging to the paricular user by passing their username in 'ownedBy' parameter.

      produces:
        - application/json
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/ownedByParam'
        - $ref: '#/parameters/deletedItemsParam'
        - $ref: '#/parameters/pageNumberParam'
        - $ref: '#/parameters/pageSizeParam'
        - $ref: '#/parameters/orderByParam'
      responses:
        '200':
          description: A List of Sample Templates
          schema:
            title: SampleTemplate List Results
            properties:
              totalHits:
                type: number
              pageNumber:
                type: number
              templates:
                $ref: '#/definitions/SampleTemplateList'
              _links:
                $ref: '#/definitions/LinkItemList'

    post:
      summary: Create a new SampleTemplate
      description: |
        Create a new SampleTemplate, supplying the field definitions.

        ## Mandatory content for SampleTemplates

        Every template must have the following  properties set.

          - name
          - defaultUnitId

        ## Types of  field

        Zero more SampleFields define additional metadata fields for the sample.

      consumes:
        - application/json
        - application/x-yaml
      tags:
        - Sample Templates
      parameters:
        - name: template
          in: body
          description: 'A sampleTemplate definition, with fields'
          required: true
          schema:
            $ref: '#/definitions/SampleTemplatePost'

      responses:
        '201':
          description: Sample Template
          schema:
            $ref: '#/definitions/SampleTemplate'
          examples:
            application/json:
              id: 1867776
              globalId: ST1867776
              name: Antibody Template
              lastModified: '2020-05-18T13:34:01.814Z'
              type: SAMPLE
              subsampleAlias:
                name: aliquot
                plural: aliquots
              defaultUnitId: 3
              fields:
                - name: A String Field
                  type: String
                  content: Some default value
                - name: A choice field
                  type: choice
                  definition:
                    options: [ '4', '6', '8']
                    multiple: true
                  selectedOptions: [ '4', '8' ]
                - name: A radio field
                  type: radio
                  definition:
                    options: [ '4,', '6', '8']
              _links:
                - link: 'https://myrspace.com/api/inventory/v1/sampleTemplates/1867776'
                  rel: self

  '/sampleTemplates/{sampleTemplateId}':
    get:
      summary: Retrieve an inventory template by ID
      description: >
        Retrieve a sample template  by ID
      produces:
        - application/json
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
      responses:
        '200':
          description: Sample Template definition
          schema:
            $ref: '#/definitions/SampleTemplate'
        '404':
          $ref: '#/responses/NotFound'
    put:
      summary: Update a Sample Template
      description: >
        Updates  properties of an existing  template
        and its fields.

        The request body should be a JSON object that specifies the details  of
        the update, and must be parsable into `#/definitions/Sample` model.

        This action requires `UPDATE` permission to the template.

        ## Examples of the request body

        | Body | Explanation |

        | --- | --- |

        `{}` | Update Sample's last modified date, but doesn't change any of the properties.

        `{ "name": "new name", "tags": [{"value":"new tags","uri":"http://uri","ontologyName":"name","ontologyVersion":"version"}] }` | Updates sample 'name' and 'tags' properties

        `{ "sharingMode": "WHITELIST", "sharedWith": [ {"group": { "uniqueName": "user3GroupOiCr" }, "shared": true} ] }` | Update sharing setup of the template, so it's now shared only with user3GroupOiCr

        `{ "fields": [ { "id": 21, "name": "newName", "content": "...newContent" },
        { "newFieldRequest": true, "name": "my field", "type": "string", "content": "new field" },
        { "id": 22, "deleteFieldRequest": true, "deleteFieldOnSampleUpdate": true } ] }` | Updates field 21
        with new name default content, deletes field 22 (with option to remove from pre-existing samples
        when these are updated to latest template definition), and adds a new string field

      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
        - $ref: '#/parameters/sampleBodyParam'
      responses:
        '200':
          description: >-
            Success - template is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'
    delete:
      summary: Delete a Sample Template
      description: >
        Mark a sample template as deleted, so it won't appear in Inventory UI and default listings.

        This action requires `UPDATE` permission to the template.

      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
      responses:
        '204':
          description: No content

  '/sampleTemplates/{sampleTemplateId}/restore':
    put:
      summary: Restore deleted Sample Template
      description: |
        Restores deleted sample template.
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
      responses:
        '200':
          description: >-
            Success - sample template is restored.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/sampleTemplates/{sampleTemplateId}/versions/{version}':
    get:
      summary: 'Gets a particular version of a Sample Template'
      description: |
        When retrieving sample template through GET request to `/sampleTemplates/` endpoints you normally see the latest (current) version of the template. Each template has a 'version' property, which starts at 1, and is increased with every update to the template.

        Use this endpoint to retrieve full details of a particular historical version of the template.

        You can check `historicalVersion` boolean flag to distinguish if returned template points to current (latest) version, or historical one. Historical template will also have a `globalId` with version number, and populated `revisionId` field.

      produces:
        - application/json
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
        - $ref: '#/parameters/versionParam'
      responses:
        '200':
          description: A template, as it was at a requested historical revision
          schema:
            $ref: '#/definitions/Sample'
        '404':
          $ref: '#/responses/NotFound'


  '/sampleTemplates/{sampleTemplateId}/image/{timestamp}':
    get:
      summary: 'Gets a full image connected to the Sample Template'
      description:
        Returns full image uploaded for the template.
      produces:
        - image/png
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/sampleTemplates/{sampleTemplateId}/thumbnail/{timestamp}':
    get:
      summary: 'Gets a thumbnail image connected to the Sample Template'
      description:
        Returns a reduced-size image uploaded for the template.
      produces:
        - image/png
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/sampleTemplates/{sampleTemplateId}/icon':
    post:
      summary: Set or replace a new display icon for a template
      description: >

        Upload a display icon for a template. It should be viewable at 96x96px resolution.

        This action requires `UPDATE` permission to the template.

      produces:
        - application/json
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
        - name: file
          in: formData
          type: file
          required: true
      consumes:
        - multipart/form-data
      responses:
        '201':
          description: Updated SampleTemplate object with new iconId
          schema:
            $ref: '#/definitions/SampleTemplateInfo'

  '/sampleTemplates/{sampleTemplateId}/icon/{iconId}':
    get:
      summary: 'Gets the icon for the template, if set'
      description:
        Templates can have an icon set for them, to help with visual identification of templates in a list. This methods retrieves the bytes of the image. The IDs can be obtained from an ApiSampleTemplate response  from a `templates/` listing.

      produces:
        - application/octet-stream
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
        - name: iconId
          description: The id for the formIcon
          type: integer
          format: int64
          in: path
          required: true
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file


  '/sampleTemplates/{sampleTemplateId}/actions/changeOwner':
    put:
      summary: Transfer the Sample Template to the new owner
      description: |
        Updates 'owner' field of existing Sample Template. No other changes to the sample are processed. Use  `/sampleTemplates/{sampleId}` PUT endpoint to update other fields of the template.

        This action requires `CHANGE_OWNER` permission to the template.

        ## Examples of the request body

        | Body | Explanation |
        | --- | --- |
        `{ "owner": { "username": "newOwner" } }` | Changes owner of a template to newOwner (requires `CHANGE_OWNER` permission). |

      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
        - $ref: '#/parameters/sampleBodyParam'
      responses:
        '200':
          description: >-
            Success - sample template is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/sampleTemplates/{sampleTemplateId}/actions/updateSamplesToLatestTemplateVersion':
    post:
      summary: Update user's samples created from the template to match its latest definition
      description: |
        If the Sample Template used to create a Sample is updated, the changes only affect future samples created from that template. Calling this endpoint will modify pre-existing user samples according to changes in the template. e.g. will add or rename the field, add new possible radio field option, etc. If there is a problem with updating a particular sample that sample is skipped, but the process continues for other samples created from the template.

        Calling this endpoint updates all the samples referencing the non-latest version of the template that user has access to. The detailed update algorithm is described in description of `/samples/{sampleId}/actions/updateToLatestTemplateVersion` POST endpoint

        Result contains list of updated samples/found problems.

        This action checks `UPDATE` permission to the samples.

      produces:
        - application/json
      tags:
        - Sample Templates
      parameters:
        - $ref: '#/parameters/sampleTemplateIdParam'
      responses:
        '200':
          description: >-
            Success.

  /containers:
    get:
      summary: Get top-level Containers visible to the current User
      description: >
        Containers endpoint returns a paginated list of summary information about top-level Containers visible to the current user.

        | Request | Explanation |

        | --- | --- |

        /containers?pageSize=10| Gets first 10 containers

        /containers?ownedBy=user1a| Gets page of top-level container owned by user1a (assuming current user can see them)

      produces:
        - application/json
      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/ownedByParam'
        - $ref: '#/parameters/deletedItemsParam'
        - $ref: '#/parameters/pageNumberParam'
        - $ref: '#/parameters/pageSizeParam'
        - $ref: '#/parameters/orderByParam'
      responses:
        '200':
          description: A list of ContainerInfo objects.
    post:
      summary: Create a new Container
      description: >-

        The POST request sent to `/containers` endpoint creates a new Container in RSpace Inventory. As well as standard metadata, the POST request can define parent container or location, extra fields, and internal locations. The "name" is the only required property; others are optional.


        Note that if you want to place a newly created container inside a specific parent container, the required properties are different depending on the type of that parent container:
         - if parent container is a LIST container, you should provide just the id of a target parent
         - if parent container is a VISUAL container, you should provide just the id of a target location
         - if parent container is a GRID container, you should provide the id of a target parent, and coordinates of a target location

        ## Examples of the request body

        | Body | Explanation |

        | --- | --- |

        `{ "name": "My Container", "cType": "LIST" }` | Creates a  List Container with given name, in the Workbench.

        `{ "name": "-70 freezer", "cType": "LIST", "removeFromParentContainerRequest": true }` | Creates a  List Container with given name, as a top-level container.

        `{ "name": "My Container", "cType": "LIST", "tags": [{"value":"api","uri":"http://uri","ontologyName":"name","ontologyVersion":"version"}], "extraFields": [{ "name": "myData", "content" : "extra text content" }] }`
        | Creates  Container named "My Container", with a tag and extra field, in Workbench

        `{ "name": "My Subcontainer #1", "cType": "LIST", "parentContainers": [ { "id": 11 } ] }`
        | Creates default Container named "My Subcontainer", placed inside a list container with id = 11.

        `{ "name": "My Subcontainer #2", "cType": "LIST", "parentLocation": { "id": 21 } }`
        | Creates container named "My Subcontainer #2", placed inside a visual container's location with id = 21.

        `{ "name": "My Subcontainer #3", "cType": "LIST", "parentContainers": [ { "id": 31} ], "parentLocation": { "coordX": 2, "coordY": 3 } }`
        | Creates container named "My Subcontainer #3", placed inside a grid container with id = 31, in a 2nd cell of a 3rd row.

        `{ "name": "24-well plate", "cType": "GRID", "gridLayout": { "columnsNumber": 6, "rowsNumber": 4} }`
        | Creates grid container with 6x4 dimensions.

        `{ "name": "4-shelf box (image Container)", "newBase64LocationsImage": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQIAAAESAQMAAAAsV 0mIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAAJcEhZcwAADsMAAA7 DAcdvqGQAAABWSURBVGje7dUhDsAgEETR5VYcv8fCgUEg1rXdhOR9/ZKRE5LO2kwbH4snHe8EQRAEQWxR88g+m yAIgiDeCo9MEARBEP+Lmr/1yARBEARxhyj5fSktYgFPS1k85Tqe JQAAAABJRU5ErkJggg==", "cType": "IMAGE", "locations": [ { "coordX" : 10, "coordY": 15}, { "coordX" : 10, "coordY": 25} ]}` | Creates image Container, with a couple of marked locations.

      tags:
        - Containers
      parameters:
        - in: body
          name: container
          description: 'A container, with optional fields and locations'
          required: true
          schema:
            $ref: '#/definitions/Container'
      responses:
        '201':
          description: >-
            Success. Returned object represents created container.
          schema:
            $ref: '#/definitions/Container'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/containers/{containerId}':
    get:
      summary: Retrieve a complete Container, by ID
      description: >
        Gets a complete Container, including the summary of its content.  The actual content will be present
        in `locations` property, but only if request is made with `includeContent` parameter set to true.
      produces:
        - application/json
      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
        - in: query
          name: includeContent
          description: if set to `true` the `locations` property is populated with content of the container
          default: false
          type: boolean
      responses:
        '200':
          description: A container
          schema:
            $ref: '#/definitions/Container'
        '404':
          $ref: '#/responses/NotFound'
    put:
      summary: Update a Container with given ID
      description: >
        Updates an existing container with provided ID.

        The request body should be a JSON object that specifies the details  of
        the update, and must be parsable into `#/definitions/Container` model.

        This action requires `UPDATE` permission to the container.

        ## Extra fields

        Extra fields belonging to the container can be updated, added and deleted as a part
        update action. To create a new extra field pass its definition with additional
        `newFieldRequest` property set to `true`. To delete an extra field pass a
        `deleteFieldRequest` property set to `true`.

        ## Moving a container

        To move a container,  provide the target container as a first element in `parentContainers` array. For grid/image container you'll also have to provide details of target location in `parentLocation` field: for grid container, provided location needs to specify target coordinates; for image container it needs to specify location id.

         To move a container outside of any other container set `removeFromParentContainerRequest` flag to true in request body. As a result the container will be shown on top level in "Containers" listing.

        When moving multiple items use `/bulk` endpoint with `"operationType": 'MOVE'`.

        ## Examples of the request body

        | Body | Explanation |

        | --- | --- |

        `{ "name": "new Name" }` | Updates a name of the container.

        `{ "extraFields": [ { "id": 21, "content": "...updated" }, { "newFieldRequest": true, "name": "my field", "content": "new field" }, { "id": 22, "deleteFieldRequest": true } ] }` | Updates extra field 21 with new content, deletes extra field 22, and creates new text extra field

        `{ "locations": [ { "id": 21, "coordX": "5" }, { "newLocationRequest": true, "coordX": "5", "coordY": "6" }, { "id": 22, "deleteLocationRequest": true } ] }` | Updates Image Container locations: location 21 is assigned new coordX, location 22 is deleted, and new location (5, 6) is created

        `{ "gridLayout": { "columnsNumber": 4, "rowsNumber": 4} }`
        | Updates grid container layout with new dimensions.

        `{ "parentContainers": [ { "id": "11"} ] }`
        | Move this container into list container 11, without specifying exact location (this will work for a list container)

        `{ "parentLocation": { "id": "21"} } }`
        | Move this container into container location 21 (this will work if container location 21 belongs to an image container)

        `{ "removeFromParentContainerRequest": true }`
        | Move this container out of its current location, so it is a top-level container.

        `{ "newBase64Image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQIAAAESAQMAAAAsV 0mIAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURf///wAAAFXC034AAAAJcEhZcwAADsMAAA7 DAcdvqGQAAABWSURBVGje7dUhDsAgEETR5VYcv8fCgUEg1rXdhOR9/ZKRE5LO2kwbH4snHe8EQRAEQWxR88g+m yAIgiDeCo9MEARBEP+Lmr/1yARBEARxhyj5fSktYgFPS1k85Tqe JQAAAABJRU5ErkJggg=="  }` | Updates main image of the Container

        `{ "sharingMode": "WHITELIST", "sharedWith": [ {"group": { "uniqueName": "user3GroupOiCr" }, "shared": true} ] }` | Update sharing setup of the container, so it's now shared only with user3GroupOiCr


      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
        - $ref: '#/parameters/containerBodyParam'
      responses:
        '200':
          description: >-
            Success - container is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
    delete:
      summary: Delete a Container
      description: >
        Mark container as deleted, so it won't appear in Inventory UI and default listings. The container will also be removed from it's current location.

        Only empty containers can be deleted - move the content out first.

        This action requires `UPDATE` permission to the container.

      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
      responses:
        '204':
          description: No content

  '/containers/{containerId}/restore':
    put:
      summary: Restore deleted Container
      description: |
        Restores deleted container and moves it to current user's Bench.
      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
      responses:
        '200':
          description: >-
            Success - container is restored.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/containers/{containerId}/image/{timestamp}':
    get:
      summary: 'Gets a full image connected to the Container'
      description:
        Returns a full image uploaded for the container.
      produces:
        - image/png
      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/containers/{containerId}/thumbnail/{timestamp}':
    get:
      summary: 'Gets a thumbnail image connected to the Container'
      description:
        Returns a reduced-size image uploaded for the container.
      produces:
        - image/png
      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/containers/{containerId}/locationsImage/{timestamp}':
    get:
      summary: 'Gets a locations image connected to the Container'
      description:
        Returns an image used as the background for drawing locations.
      produces:
        - application/json
        - image/png
      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
        - $ref: '#/parameters/timeStampParam'
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  '/containers/{containerId}/actions/changeOwner':
    put:
      summary: Transfer the Container to the new owner
      description: |
        Updates pdates 'owner' field of existing Container. No other changes to the container are processed. Use  `/containers/{containerId}` PUT endpoint to update other fields of the container.

        This action requires `CHANGE_OWNER` permission to the container.

        ## Examples of the request body

        | Body | Explanation |
        | --- | --- |
        `{ "owner": { "username": "newOwner" } }` | Changes owner of a container to newOwner (requires `CHANGE_OWNER` permission). |

      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
        - $ref: '#/parameters/containerBodyParam'
      responses:
        '200':
          description: >-
            Success - container is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
        '500':
          $ref: '#/responses/LicenseProblem'

  '/containers/{containerId}/actions/duplicate':
    post:
      summary: Duplicate a container
      description: |
        Generates a deep copy of the container.

        This action requires `UPDATE` permission to the container.
      produces:
        - application/json
      tags:
        - Containers
      parameters:
        - $ref: '#/parameters/containerIdParam'
      responses:
        '201':
          description: The new, duplicate subsample.
          schema:
            $ref: '#/definitions/Container'

  /search:
    get:
      summary: Search through inventory items
      description: >
        Returns a paginated list of summary information about inventory items (samples, subsamples, containers and templates) matching search query.

         Search can be limited with 'parentGlobalId' parameter, to include only:
          a) children (content) of a particular container or workbench
          b) samples created from a particular template
          c) subsamples of a given sample

        If 'parentGlobalId' is provided the 'query' parameter can be empty (which returns all children).

         Search can be also limited with 'ownedBy' parameter, to include only items belonging to that user.

        | Query | Explanation |

        | --- | --- |

        /search?query=pcr | Gets samples and subsamples containing the word 'pcr'.

        /search?query=mice&resultType=SUBSAMPLE&orderBy=name%20asc | Get subsamples containing the word 'mice', ordered by subsample name ascending.

      produces:
        - application/json
      tags:
        - Search
      parameters:
        - $ref: '#/parameters/queryParam'
        - $ref: '#/parameters/resultTypeParam'
        - $ref: '#/parameters/parentGlobalIdParam'
        - $ref: '#/parameters/ownedByParam'
        - $ref: '#/parameters/deletedItemsParam'
        - $ref: '#/parameters/pageNumberParam'
        - $ref: '#/parameters/pageSizeParam'
        - $ref: '#/parameters/orderByParam'
      responses:
        '200':
          description: A list of InventoryRecordInfo objects.

  /barcodes:
    get:
      summary: 'Gets a barcode image for requested content'
      description:
        Get a PNG image representing barcode (or QR code) of the requested content.

      produces:
        - application/json
        - image/png
      tags:
        - Barcodes
      parameters:
        - name: content
          in: query
          type: string
          required: true
          description: content to put into barcode
        - name: barcodeType
          in: query
          type: string
          default: BARCODE
          enum:
            - BARCODE
            - QR
          description: type of requested barcode
        - name: imageWidth
          in: query
          type: integer
          format: int8
          description: requested minimal width of the generated barcode image
        - name: imageHeight
          in: query
          type: integer
          format: int8
          description: requested minimal height of the generated barcode image
      responses:
        '200':
          description: File as bytes.
          schema:
            type: file

  /bulk:
    post:
      summary: Request an operation on a set of Inventory items
      description: >-

        The POST request sent to `/bulk` endpoint executes an operation on a set of items.


        Items passed to `/bulk` endpoint can represent samples, subsamples, containers or any mix of the types. Each item has to have `type` parameter provided, one of:
        `SAMPLE`, `SUBSAMPLE`, `CONTAINER` or `SAMPLE_TEMPLATE`.

        ## Supported operations

        Request body has to provide top-level `operationType` field specifying requested action, which can be one of: `CREATE`, `UPDATE`, `DELETE`, `RESTORE`, `DUPLICATE`, `MOVE`, `CHANGE_OWNER`.


        In principle, the operation executed for a set of items will be the same as calling particular create (POST), update (UPDATE), delete (DELETE), or /duplicate (POST) endpoint directly for each item. The exception is MOVE operation, which executes move for all items 'at once' to support more complex move scenarios like swapping the items inside a container.

        ## Handling mid-operation errors

        By default, if an error is encountered during bulk operation, the whole operation is reverted. This can be changed by setting `"rollbackOnError":false` parameter in the request body. With `"rollbackOnError":false` the operation is executed in a separate transaction for each provided item, and if an error is encountered when processing the particular item, that item is skipped, but the operation continues.


        `MOVE` operation cannot be called with `"rollbackOnError":false` i.e. will always revert if error is encountered. That's because implementation details don't allow for commiting partial move result.

        ## Accessing functionality available through query parameters

        Individual  endpoints may support extra query parameters for additional functionality. For bulk operations, these can be reproduced by setting field with the same name as query parameter, in the JSON body.


        For example: /samples DELETE endpoint supports additional "forceDelete" setting with query parameter. For bulk delete operation the same behaviour can be achieved by passing sample item as { "type": "SAMPLE", "id": "<id>", "forceDelete": <true/false> }.


        *Note* that `type` has to appear as the first property in the JSON object defining each item. This is required by the JSON-parsing library used by RSpace.

        ## Examples of the request body

        | Body | Explanation |

        | --- | --- |

        { "operationType": "CREATE", "records": [ { "type": "SAMPLE", "name": "mySample",  "newSampleSubSamplesCount": 2 }, { "type": "CONTAINER", "cType": "LIST", "name": "myContainer" } ] } | Create a sample (with two default subsamples) and a list container.

        { "operationType": "UPDATE", "records": [ { "type": "SUBSAMPLE", "id": "851970", "name":"mySample.updated", "tags":[{"value":"apiEdited","uri":"http://uri","ontologyName":"name","ontologyVersion":"version"}] }, { "type": "SUBSAMPLE", "id": "851971", "tags":"apiEdited", "parentContainers": [ { "id": 720896} ] } ] } | Rename and tag first subsample, tag and move another.

        { "operationType": "MOVE", "records": [ { "type": "SUBSAMPLE", "id": "851970", "parentContainers": [ { "id": 720896} ], "parentLocation": { "coordX": 1, "coordY": 1 } }, { "type": "CONTAINER", "id": "851971", "removeFromParentContainerRequest": true } ] } | Move one subsamples into grid container location, move another container to top-level containers.

        { "operationType": "DELETE", "rollbackOnError": false, "records": [ { "type": "SAMPLE", "id": "851970", "forceDelete": true }, { "type": "CONTAINER", "id": "851971" } ] } | Delete a sample and a container, proceed even if sample has problematic subsamples ("forceDelete": true) and if one of the records cannot be deleted ("rollbackOnError": false).

        { "operationType": "RESTORE", "rollbackOnError": false, "records": [ { "type": "SUBSAMPLE", "id": "851970" }, { "type": "CONTAINER", "id": "851971" } ] } | Restores deleted subsample and a container. If restored subsample belongs to a sample that was deleted, that sample is restored too.

        { "operationType": "CHANGE_OWNER", "records": [ { "type": "SAMPLE", "id": "851970", "owner" : { "username": "newOwner"} }, { "type": "CONTAINER", "id": "851971", "owner" : { "username": "newOwner"} } ] } | Transfers a sample and a container to another user.

      tags:
        - Bulk Operations
      parameters:
        - $ref: '#/parameters/bulkOperationBodyParam'
      responses:
        '201':
          description: >-
            Success.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'

  '/import/parseFile':
    post:
      summary: Parse the incoming CSV file for import UI
      description: >



        ### Parsing containers/subsamples CSV file

        When provided `recordType` parameter has value: `CONTAINERS` or `SUBSAMPLES`, the endpoint verifies basic structure of the data and returns the object containing:

          * `columnNames`: array of column names in CSV file.
          * `columnsWithoutBlankValue`: array of column names which CSV lines have no blank value
          * `rowsCount`: number of data rows found in CSV file


        ### Parsing samples CSV file

        When provided `recordType` parameter has value: `SAMPLES`, the endpoint verifies basic structure of the data and suggests the template definition that could be used for running an actual import with `/import/importFiles` endpoint.


        Upon successful parsing the response object contains:
          * `templateInfo`: a definition of a suggested template. The template definition can be modified by the client, or can be used immediately to populate `importSettings.sampleSettings.templateInfo` parameter required by `/import/importFiles` endpoint
          * `fieldNameForColumnName`: map that allows finding suggested field name for given CSV colum name. It could be that column name used in CSV file is not a valid RSpace template field name, in which case the field suggested for `templateInfo` will have a name adjusted to match the rules.
          * `radioOptionsForColumn`: it could be that particular column in CSV file should be converted to Radio/Choice field, but the parsing algorithm suggested another field type. In such case the client can adjust `templateInfo` field definition and populate radio definition using this map
          * `quantityUnitForColumn`: lists the columns that could be converted to "Quantity" field, with the id of suggested quantity unit
          * `columnNames` list of column names in CSV file. This are the names that should be provided in `fieldMappings` object used by `/import/importFiles`.
          * `columnsWithoutBlankValue`: array of column names which CSV lines have no blank value
          * `rowsCount`: number of data rows found in CSV file

      produces:
        - application/json
      tags:
        - Import
      parameters:
        - name: file
          in: formData
          type: file
          required: true
        - name: recordType
          in: query
          type: string
          default: SAMPLES
          enum:
            - SAMPLES
            - SUBSAMPLES
            - CONTAINERS
      consumes:
        - multipart/form-data
      responses:
        '200':
          description: Parse results.

  '/import/importFiles':
    post:
      summary: Import Containers, Samples and SubSamples from CSV files
      description: >-

        Allows import of up to three CSV files describing samples and/or subSamples and/or containers. Providing multiple files allows referencing rows in one file with rows in another file, e.g. saying that particular subSample from subSample CSV should be part of a particular samples from sample CSV file placed in a particular container from container CSV. If the files don't need to reference each other it may be easier to to import them separately.


        `importSettings` must be a JSON object that contains settings for one or more imported csv file:
           * `containerSettings` for containers (skip if not importing containers)
           * `sampleSettings` for samples (skip if not importing samples)
           * `subSampleSettings` for subSamples (skip if not importing subSamples)


        There is a limit on size of CSV files. By default CSVs can containe no more than 500 containers, 1000 samples or 2000 subSamples.


        ## Containers import

        Import content of CSV file as inventory containers, possibly set up in a hierarchy.


        `containerSettings` must be a JSON object with a following property:
           * `fieldMappings` field that is used to map CSV columns to standard container fields, for setting up containers hierarchy, and for marking CSV columns that should be ignored.

        To map CSV column name to standard container field set property of `fieldMappings` with a name of CSV column and a value being one of: `name`, `description`, `tags`. To ignore CSV column set value to null.


        To set up containers hierarchy add column mappings into `import identifier` and `parent container import id`. The `import identifier` must be a column with unique values that are references in `parent container import id` column.


        Created containers will be placed by default in a new container that is created on user's Bench during import. To put a container into container already existing in the system, put the global id of that existing container in container CSV column mapped to `parent container global id`.


        ## Samples import

        Imports content of CSV file as samples based on newly created, or pre-existing sample template.


        `sampleSettings` must be a JSON object with following properties:
           * `templateInfo` field containing either full definition for a new sample template (same as used in sample template POST api, or as retrived by `/import/parseFile` endpoint), or with `id` property pointing to existing sample template that should be used
           * `fieldMappings` field that is used to map CSV columns to standard sample fields (optional, apart from `name`), for pointing to parent container (optional), and for marking CSV columns that should be ignored.


        To map CSV column name to standard sample field set property of `fieldMappings` with a name of CSV column and a value being one of: `name`, `description`, `tags`, `source`, `expiry date`, `quantity`. To ignore CSV column set value to null.


        The values from CSV columns not mentioned in `fieldMappings` will be imported into sample fields defined by the template, in the order of fields in the template (i.e. 1st CSV column into 1st sample field, 2nd into 2nd, etc.).
        The number of CSV columns mapped into sample fields has to exactly match the number of template fields, i.e. CSV file must have a column for every template field, in the right order.


        Each imported sample will have, by default, a single subsample, placed in a new container created on user's Bench during import. To put a default subsample into one of the containers imported through containers CSV in the same import operation the sample CSV column can be mapped to `parent container import id`, with values corresponding to values in containers CSV mapped to `import identifier`. To put a default subsample into preexisting container put the global id of that container in sample CSV column mapped to `parent container global id`.


        ## SubSample import

        Imports content of CSV file as subSamples of pre-existing samples, or of samples being imported as a part of the same import operation.


        Each of the subSamples must reference parent sample through a value in column mapped to either `parent sample import id` or `parent sample global id`. In the first case the value needs to correspond to 'import identifier' value in samples CSV imported in the same operation (which means samples CSV, and `sampleSettings` must also be present in POST request). Second case i.e. importing into pre-existing samples doesn't require samples CSV, in that case value in column mapped to `parent sample global id` should be a global id of a pre-existing sample that is editable by the current user.


        `subSampleSettings` must be a JSON object with a following property:
           * `fieldMappings` field that is used to map CSV columns to standard subSample fields (optional, apart from `name` mapping which is required), for pointing to parent sample (required), for pointing to parent container (optional), and for marking CSV columns that should be ignored.

        To map CSV column name to standard subSample field set property of `fieldMappings` with a name of CSV column and a value being one of: `name`, `description`, `tags`. To ignore CSV column set value to null.


        Created subSamples will be placed by default in a new container that is created on user's Bench during import. To put a subsample into one of the containers imported through containers CSV in the same import operation the subSample CSV column can be mapped to `parent container import id`, with values corresponding to values in containers CSV mapped to `import identifier`. To put a subsample into preexisting container put the global id of that container in subSample CSV column mapped to `parent container global id`.


        ## Import results

        Import result object contains:
          * `containerResults`, `sampleResults` and `subSampleResults` objects with details of container/sample/subsamples imports
          * `status` property, which for successful import will be set to "COMPLETED".

        If any error occurs before/during import process, then all changes are reverted, i.e. nothing is created unless the import completes with status "COMPLETED".

        ## Examples of the `importSettings` object

        | importSettings | Explanation |

        | --- | --- |

        { "sampleSettings": { "templateInfo": { ... }, "fieldMappings" : { "Antibody Name": "name" } } } |
        Import samples, use CSV column named 'Antibody Name' for the name of the imported sample

        { "sampleSettings": { "templateInfo": { ... }, "fieldMappings" : { "Name": "name", "Alternative name": "description", "Dummy Data": null, "Best Before": "expiry date" } } } |
        Import samples, use CSV column named 'Name' for a name of imported sample, "Alternative name" as a description of imported sample, and 'Best Before' as an expiry date.
        Also ignore CSV column named 'Dummy Data'.

        { "sampleSettings": { "templateInfo": { "id": 12 }, "fieldMappings" : { ... } } } |
        Import samples, use CSV lines to create samples based on pre-existing template with id = 12.

        { "containerSettings": { "fieldMappings" : { "Name": "name", "Import Id": "import identifier", "Parent Container Import Id": "parent container import id" } } } |
        Import hierarchy of containers.

        { "containerSettings": { "fieldMappings" : { "Name": "name", "Import Id": "import identifier" } }, "sampleSettings": { "templateInfo": { ... }, "fieldMappings" : { "Name": "name", "Parent Container Import Id": "parent container import id" } } } |
        Combined sample/container import that can also move default subsamples created during sample import into imported containers (with "parent container import id" -> "import identifier" mappings).

        { "containerSettings" : { "fieldMappings" : { "Name": "name", "Import Id": "import identifier" } }, "sampleSettings": { "templateInfo": { ... }, "fieldMappings" : { "Name": "name", "Import Id": "import identifier" } }, "subSampleSettings": { "fieldMappings" : { "Name": "name", "Parent Sample Import Id": "parent sample import id", "Parent Container Import Id": "parent container import id" } } } |
        Combined container/sample/subSample import that puts subSamples into imported samples, and can also move imported subSamples into imported containers (with "paret container import id" -> "import identifier" mappings)

        { "subSampleSettings": { "fieldMappings" : { "Name": "name", "Parent Sample Global Id": "parent sample global id", "Parent Container Global Id": "parent container global id" } } } |
        Import subSamples into pre-existing samples and containers.

      produces:
        - application/json
      tags:
        - Import
      parameters:
        - name: containersFile
          in: formData
          type: file
        - name: samplesFile
          in: formData
          type: file
        - name: subSamplesFile
          in: formData
          type: file
        - name: importSettings
          in: formData
          type: string
          description: JSON settings string for import operation.
          required: true
      consumes:
        - multipart/form-data
      responses:
        '200':
          description: Import results.

  '/export':
    post:
      summary: Export Containers, Samples and SubSamples as CSV files
      description: >-

        `exportSettings` is a required parameter, which must be a JSON object containing one of the following properties:
           * `globalIds` with an array of global ids of inventory items that should be included in export
           * `users` with an array of usernames of users whose inventory items should be included in export


        `exportSettings` may also contain optional properties:
           * `exportMode` with a value of `COMPACT` or `FULL`. Default is `FULL`, which means both basic data and custom/template field content is included in export. `COMPACT` mode only exports basic data, without fields
           * `includeSubsamplesInSample` with a true/false boolean value. Default is `true`, which means subsamples of exported samples are included in export. `false` means the sample's subsamples are excluded
           * `includeContainerContent` with a true/false boolean value. Default is `false`, which means content of the exported container will not be included in export. `true` means that subsamples and subcontainers stored inside exported container will be exported too (including content of these subcontainers, and their content, etc.)

        ## Examples of the `exportSettings` object

        | exportSettings | Explanation |

        | --- | --- |

        { "globalIds": [ "SS11", "SS12", "SS13" ] } |
        Export selection of items (3 subsamples with id: 11, 12, 13)

        { "globalIds": [ "SA21", "SS11", "SS12" ], "includeSubsamplesInSample": false } |
        Export selection of items (a samples and 2 subsamples), without subsamples of an exported sample

        { "globalIds": [ "IC6" ], "includeContainerContent": true } |
        Export a container IC6, including all it's content.

        { "users": [ "user1a" ], "exportMode": "COMPACT" } |
        Export basic metadata of all inventory items belonging to user1a.

        { "users": [ "user1a" ], "resultFileType": "SINGLE_CSV" } |
        Export data of all inventory items belonging to user1a with results put into single CSV file, rather than ZIP archive.

        ## Result

        Successful export action will return details of executed export task, including links to created archive file in `"_links"` property. The link for direct download through UI (assumes client has active web session) is marked with `"rel": "downloadLink"`. The link for download through API is marked as `"rel": "enclosure"`.

      produces:
        - application/json
      tags:
        - Export
      parameters:
        - name: exportSettings
          in: formData
          type: string
          description: JSON settings string for export operation.
          required: true
      consumes:
        - multipart/form-data
      responses:
        '200':
          description: Results of export task. "_links" array will contain URIs pointing to exported file.
          schema:
            $ref: '#/definitions/Job'

  '/editLocks/{globalId}':
    post:
      summary: Lock the inventory item for editing
      description: >
        Creates an edit lock for an item. When an item is locked, only the user having a lock will be able to modify the it. Lock expires automatically after some time (typically 15-30 minutes). It  can be also released by calling DELETE endpoint.

        User who locked the item can call the endpoint again to extend the lock.

        You must have UPDATE permission for the item to lock it.

      produces:
        - application/json
      tags:
        - Edit Locks
      parameters:
        - $ref: '#/parameters/globalIdParam'
      responses:
        '200':
          description: Lock is set.

    delete:
      summary: Release edit lock from the inventory item
      description: >
        Removes edit lock from the item. You must be an owner of the current lock for the operation to succeed.

      produces:
        - application/json
      tags:
        - Edit Locks
      parameters:
        - $ref: '#/parameters/globalIdParam'
      responses:
        '200':
          description: Lock is released.

  '/files':
    post:
      summary: Upload file as an attachment to the inventory item or sample field
      description: >

        Uploads a file as an attachment to the inventory item or sample field of 'attachment' type.

        `fileSettings` must be a JSON object with the following properties:
           * `parentGlobalId` property pointing to the inventory item, or sample field, for which this attachment is uploaded.
           * `fileName` (optional) property containing a name for the file. If not present, the name connected with an uploaded stream will be used

        ## Examples of the `fileSettings` object

        | fileSettings | Explanation |

        | --- | --- |

        { "parentGlobalId": "IC8" } | Add file as attachment to container with id=8, use filename as an attachment name

        { "parentGlobalId": "SA10", "fileName": "test.txt" } | Add file as attachment to sample with id=10, set the attachment name to "test.txt"

        { "parentGlobalId": "SF11" } | Add file as attachment to a sample field with id=11. This must be an 'attachment' type field.


      produces:
        - application/json
      tags:
        - Attached Files
      parameters:
        - name: file
          in: formData
          type: file
          required: true
        - name: fileSettings
          in: formData
          type: string
          description: json settings string for upload file operation.
          required: true
      consumes:
        - multipart/form-data
      responses:
        '200':
          description: Details of uploaded attachment (ApiInventoryFile object).

  '/files/{fileId}':
    get:
      summary: Retrieves details of an inventory attachment
      description: Gets a single ApiInventoryFile by its id.
      produces:
        - application/json
      tags:
        - Attached Files
      parameters:
        - $ref: '#/parameters/inventoryFileIdParam'
      responses:
        '200':
          description: A File object.
          schema:
            $ref: '#/definitions/File'
        '404':
          description: 'File does not exist, or you can''t access it.'

    delete:
      summary: Delete inventory attachment
      description: Marks inventory file as deleted, so it won't appear on attachments list.
      produces:
        - application/json
      tags:
        - Attached Files
      parameters:
        - $ref: '#/parameters/inventoryFileIdParam'
      responses:
        '200':
          description: An ApiInventoryFile object.
          schema:
            $ref: '#/definitions/File'
        '404':
          description: 'File does not exist, or you can''t access it.'

  '/files/{fileId}/file':
    get:
      summary: Gets binary content of an inventory attachment
      description: >
        Downloads file contents. The content type of the response will be the
        `contentType` of the enclosing media item.

        When calling the endpoint with swagger-ui set the 'Response Content
        Type' to `application/octet-stream` to get a working 'Download file'
        link in response body, or switch the type to `application/json`to debug
        any server error messages.
      produces:
        - application/json
      tags:
        - Attached Files
      parameters:
        - $ref: '#/parameters/inventoryFileIdParam'
      responses:
        '200':
          description: Binary content of the attachment file

  '/files/{fileId}/chemFileDetails':
    get:
      summary: Get chemical attachment details
      description: >
        Parses attached inventory file into chemical details object.

        Basically equivalent of ELN endpoint `/chemical/ajax/loadChemElements`, but asks for inventory file id as a parameter, rather than chemId.


        Requires chemistry conversion service to be properly configured and available.


      produces:
        - application/json
      tags:
        - Attached Files
      parameters:
        - $ref: '#/parameters/inventoryFileIdParam'
      responses:
        '200':
          description: Chemical details object

  '/attachments':
    post:
      summary: Attach existing Gallery item to the inventory item or sample field
      description: >

        Attaches existing Gallery file to the inventory item or sample field of 'attachment' type.

        Body must be a JSON object with the following properties:
           * `parentGlobalId` property pointing to the inventory item, or sample field, for which this attachment is uploaded.
           * `mediaFileGlobalId` property pointing to the Gallery item that should be connected as an attachment.

      produces:
        - application/json
      tags:
        - Attached Gallery Items
      parameters:
        - in: body
          name: attachmentDetails
          type: string
          description: json settings string for attaching gallery file operation.
          required: true
          example: { "parentGlobalId": "IC8", "mediaFileGlobalId": "GL12" }
      responses:
        '200':
          description: Details of connected attachment (ApiInventoryFile object).

  '/identifiers':
    post:
      summary: Register a new DataCite IGSN identifier for an inventory item
      description: >
        Creates an identifier for the requested inventory item. Requires object with one "parentGlobalId" property as a request body.

        You must have UPDATE permission for the item to create an identifier for it.

        ## Example request body

        | POST request body | Explanation |

        | --- | --- |

        { "parentGlobalId": "IC8" } | Register new identifier for a container with id=8

      produces:
        - application/json
      tags:
        - IGSN Identifiers
      parameters:
        - name: body
          in: body
          required: true
          schema:
            "$ref": "#/definitions/BasicObject"
      responses:
        '200':
          description: Identifier is created

  '/identifiers/{doiId}':
    delete:
      summary: Delete a draft DataCite IGSN identifier registered for the inventory item
      description: >
        Attempts to delete a connected DataCite IGSN identifier.

        You must have UPDATE permission for the item to delete its identifier.

      produces:
        - application/json
      tags:
        - IGSN Identifiers
      parameters:
        - $ref: '#/parameters/digitalObjectIdentifierIdParam'
      responses:
        '200':
          description: Identifier is created

  '/identifiers/{doiId}/publish':
    post:
      summary: Publish an identifier, and the connected inventory item
      description: >
        Publishes DataCite IGSN identifier and connected record.

      produces:
        - application/json
      tags:
        - IGSN Identifiers
      parameters:
        - $ref: '#/parameters/digitalObjectIdentifierIdParam'
      responses:
        '200':
          description: Identifier and inventory item are published.

  '/identifiers/{doiId}/retract':
    post:
      summary: Retract an identifier, and unpublish connected inventory item
      description: >
        Retracts DataCite IGSN identifier and hides previously published connected record.

      produces:
        - application/json
      tags:
        - IGSN Identifiers
      parameters:
        - $ref: '#/parameters/digitalObjectIdentifierIdParam'
      responses:
        '200':
          description: Identifier is retracted and inventory item is hidden.

  '/identifiers/testDataCiteConnection':
    get:
      summary: Test connection settings saved for DataCite integration
      description: >
        Test connection settings saved for DataCite integration
      produces:
        - application/json
      tags:
        - IGSN Identifiers
      responses:
        '200':
          description: boolean saying whether connection was successful

  '/baskets':
    get:
      summary: 'Get all baskets belonging to the current user'
      description:
        Return info for all baskets belonging to the current user.
      produces:
        - application/json
      tags:
        - Baskets
      responses:
        '200':
          description: List of baskets belonging to the current user

    post:
      summary: Create new basket
      description: >

        { "name": "List A" } | Create new empty basket named  "List A"

      parameters:
        - $ref: '#/parameters/basketPostParam'
      produces:
        - application/json
      tags:
        - Baskets
      responses:
        '200':
          description: A new basket created for the current user

  '/baskets/{basketId}':
    get:
      summary: 'Get a specific basket'
      description:
        Endpoint returning a single basket, with content.
      produces:
        - application/json
      tags:
        - Baskets
      parameters:
        - $ref: '#/parameters/basketIdParam'
      responses:
        '200':
          description: Basket with content
    put:
      summary: Update details of specific basket
      description: >

        Only "name" change support for now.

        { "name": "List A2" } | Modifies basket name to "List A2"

      tags:
        - Baskets
      parameters:
        - $ref: '#/parameters/basketIdParam'
        - $ref: '#/parameters/basketBodyParam'
      responses:
        '200':
          description: >-
            Success - container is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
    delete:
      summary: Remove a specific basket
      description: >
        .
      produces:
        - application/json
      tags:
        - Baskets
      parameters:
        - $ref: '#/parameters/basketIdParam'
      responses:
        '200':
          description: The basket is removed.

  '/baskets/{basketId}/addItems':
    post:
      summary: 'Add inventory item(s) to a given basket'
      description:
        Add items to basket, by providing the array of items global ids.
      produces:
        - application/json
      tags:
        - Baskets
      parameters:
        - $ref: '#/parameters/basketIdParam'
        - $ref: '#/parameters/basketItemsParam'
      responses:
        '200':
          description: items added

  '/baskets/{basketId}/removeItems':
    post:
      summary: 'Remove inventory item(s) from a given basket'
      description:
        Remove items from basket, by providing the array of items global ids.
      produces:
        - application/json
      tags:
        - Baskets
      parameters:
        - $ref: '#/parameters/basketIdParam'
        - $ref: '#/parameters/basketItemsParam'

      responses:
        '200':
          description: items removed

  '/listOfMaterials/forDocument/{docId}':
    get:
      summary: 'Get all lists of materials used in ELN document'
      description: >
        Returns all  lists of materials connected to given ELN document.


        Note: lists of materials returned by this endpoint each have `elnDocument` property set to `null`. This is to avoid repeating the information, as every list references the same document.

      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/docIdParam'
      responses:
        '200':
          description: List of material usages registered for each field of the document

  '/listOfMaterials/forField/{elnFieldId}':
    get:
      summary: 'Get all list of materials used for a field in ELN document'
      description: >
        Return list of materials connected to a field in an ELN document.


        Note: lists of materials returned by this endpoint each have `elnDocument` property set to `null`. This is to avoid repeating the information, as every list references the same document.

      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/elnFieldIdParam'
      responses:
        '200':
          description: List of material usages registered for a field of the document

  '/listOfMaterials/forInventoryItem/{globalId}':
    get:
      summary: 'Get all list of materials containing a specific inventory item'
      description:
        Return list of materials that are using a specific sample/subsample/container.
      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/globalIdParam'
      responses:
        '200':
          description: List of material usages containing a specific inventory item

  '/listOfMaterials':
    post:
      summary: Register new list of materials for a particular ELN field
      description: >
        Register usage of an ELN materials within ELN document.

        ## Example POST requests

        | Body | Explanation |

        | --- | --- |

        { "name": "List A", "elnFieldId": 123 } | Create new empty list of materials, named "List A", attached to document field with id 123.

      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/listOfMaterialsBodyParam'
      responses:
        '200':
          description: A registered material usage

  '/listOfMaterials/{lomId}':
    get:
      summary: 'Get a specific list of materials'
      description:
        Endpoint returning a single list of materials connected to an ELN document field.
      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/lomIdParam'
      responses:
        '200':
          description: List of material usages registered for each field of the document
    put:
      summary: Save a specific list of materials
      description: >

        Update usage of an ELN materials within ELN document.

        If `usedQuantity` is specified, the client can also request simultanous update of connected
        inventory item. This is done by passing `"updateInventoryQuantity": true` param. The
        quantity of the connected item will be reduced by the quantity used in the list of materials.
        If used quantity is larger than current quantity of connected item, then quantity of connected
        item is set to zero (i.e. it is never negative).

        If the list of materials was already saved with `usedQuantity` for given item, and new
        `usedQuantity` is different, the `updateInventoryQuantity` param will adjust quantity of connected
        item by a difference between old and new used quantity. E.g. if previously saved `usedQuantity`
        was 5 units, and new `usedQuantity` is 6 units, and `updateInventoryQuantity` is set, then
        quantity of connected item will be reduced by 1 unit.

        ## Example PUT requests

        | Body | Explanation |

        | --- | --- |

        { "materials": [ ] } | Removes all materials fom the list

        { "materials": [ { "invRec": { "id": 123, "type": "CONTAINER"} } ] } | Sets the list of used materials to one item - container with id 123.

        { "materials": [ { "invRec": { "id": 123, "type": "CONTAINER"} }, { "invRec": { "id": 234, "type": "SUBSAMPLE" }, "usedQuantity": { "unitId": 3, "numericValue": 5 }, "updateInventoryQuantity": true } ] } | Sets the list of used materials to two items - container with id 123, and 5ml of subsample with id 234. Also reduces the current quantity of subsample 234 by 5ml.

      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/lomIdParam'
        - $ref: '#/parameters/listOfMaterialsBodyParam'
      responses:
        '200':
          description: >-
            Success - container is updated.
        '404':
          $ref: '#/responses/NotFound'
        '422':
          $ref: '#/responses/UnprocessableQuery'
    delete:
      summary: Remove a specific list of materials
      description: >
        .
      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/lomIdParam'
      responses:
        '200':
          description: The List of Materials is removed.

  '/listOfMaterials/{lomId}/canEdit':
    get:
      summary: 'Can current user edit a specific list of materials'
      description:
        Endpoint calculates if user can edit a list of materials with given id,
        i.e. whether this list of materials belongs to an experiment that user can edit
      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/lomIdParam'
      responses:
        '200':
          description: true/false depending if user can edit the list of materials

  '/listOfMaterials/{lomId}/revisions/{revisionId}':
    get:
      summary: 'Gets historical revision of a specific list of materials'
      description:
        Returns historical revision of a specific list of materials.
      produces:
        - application/json
      tags:
        - ELN integration
      parameters:
        - $ref: '#/parameters/lomIdParam'
        - $ref: '#/parameters/revisionIdParam'
      responses:
        '200':
          description: A list of materials, as it was at a requested historical revision
        '404':
          $ref: '#/responses/NotFound'

  '/public/view/{publicLink}':
    get:
      summary: 'Get published inventory item by public link'
      description: returns
      produces:
        - application/json
      tags:
        - Published Items
      parameters:
        - $ref: '#/parameters/publicLinkParam'
      responses:
        '200':
          description: A public view of the published item
        '404':
          $ref: '#/responses/NotFound'

  '/system/settings':
    get:
      summary: 'Get settings'
      description: returns settings
      produces:
        - application/json
      tags:
        - System Settings (System Admin only)
      responses:
        '200':
          description: List of baskets belonging to the current user
    put:
      summary: 'Update settings'
      description: update settings
      tags:
        - System Settings (System Admin only)
      parameters:
        - $ref: '#/parameters/inventorySettingsBodyParam'
      responses:
        '200':
          description: >-
            Success - settings are updated.
        '422':
          $ref: '#/responses/UnprocessableQuery'


definitions:
  BasicObject:
    type: object
  InventoryRecordInfo:
    description: Basic information common for RSpace Inventory Entities
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier for the item.
      globalId:
        type: string
        description: A unique identifier amongst all RSpace data types.
      name:
        type: string
        description: The Sample's name.
      description:
        type: string
        description: The Sample's description.
      created:
        type: string
        format: date-time
        description: The creation time of the item.
      createdBy:
        type: string
        description: Username of the item's creator.
      lastModified:
        type: string
        format: date-time
        description: The last modification time of the item.
      modifiedBy:
        type: string
        description: Username of the last person modifiying the item.
      modifiedByFullName:
        type: string
        description: Full name of the last person modifiying the item.
      deleted:
        type: boolean
        description: Whether item is deleted or not.
      deletedDate:
        type: string
        format: date-time
        description: For deleted item - date of deletion
      iconId:
        type: integer
        format: int64
        description: The item's icon identifier.
      quantity:
        $ref: '#/definitions/Quantity'
      tags:
        $ref: '#/definitions/TagList'
      type:
        type: string
        description: Type of the inventory item, must be one of allowed values.
        enum:
          - SAMPLE
          - SUBSAMPLE
          - CONTAINER
          - SAMPLE_TEMPLATE
      attachments:
        $ref: '#/definitions/FileList'
      barcodes:
        $ref: '#/definitions/BarcodeList'
      owner:
        $ref: '#/definitions/User'
      permittedActions:
        type: array
        description: List of actions that current user can perform with the item
        items:
          type: string
          enum:
            - READ
            - LIMITED_READ
            - UPDATE
            - CHANGE_OWNER
      sharingMode:
        type: string
        description: The sharing mode of the inventory item
        enum:
          - OWNER_GROUPS
          - WHITELIST
          - OWNER_ONLY
  MovableInventoryRecordInfo:
    allOf:
      - $ref: '#/definitions/InventoryRecordInfo'
      - properties:
          parentContainers:
            $ref: '#/definitions/ContainerList'
          parentLocation:
            $ref: '#/definitions/ContainerLocationInfo'
          lastNonWorkbenchParent:
            $ref: '#/definitions/ContainerInfo'
          lastMoveDate:
            type: string
            format: date-time
            description: The date when item was moved last time

  SampleInfo:
    description: Basic information about RSpace Inventory Sample.
    allOf:
      - $ref: '#/definitions/InventoryRecordInfo'
      - properties:
          templateId:
            type: number
            description: Identifier of the template used to create this sample. May be unset if this sample was not created from  a Template
            example: 1
          templateVersion:
            type: number
            description: Version of the connected template
          template:
            type: boolean
            description: Flag descirbing whether this sample is a template
            example:
              false
          revisionId:
            type: number
            description: Revision id of the sample
          version:
            type: number
            description: Version number
          historicalVersion:
            type: boolean
            description: Whether object represents a historical, or latest, version of the sample
          subSampleAlias:
            description: Alias to use for describing a single or multiple subsamples of this sample
            properties:
              alias:
                type : string
              plural:
                type : string
          subSampleCount:
            type: number
            description: Number of subsamples belonging to the sample
          storageTempMin:
            $ref: '#/definitions/Quantity'
          storageTempMax:
            $ref: '#/definitions/Quantity'

          sampleSource:
            type: string
            description: The source of the sample, must be one of allowed values.
            enum:
              - LAB_CREATED
              - VENDOR_SUPPLIED
              - OTHER
          expiryDate:
            type: string
            format: date
            description: Optional date at which a sample expires, in ISO-8601 format
  Sample:
    example:
      name: Generic Sample
    description: The complete information on a Sample
    allOf:
      - $ref: '#/definitions/SampleInfo'
      - properties:
          sharedWith:
            $ref: '#/definitions/GroupShareInfoList'
          fields:
            $ref: '#/definitions/SampleFieldList'
          extraFields:
            $ref: '#/definitions/ExtraFieldList'
          subSamples:
            $ref: '#/definitions/SubSampleList'

  ApiTagInfo:
    description: Information about an RSpace inventory Tag
    properties:
      value:
        type: string
        description: tag value used in search and displayed.
      uri:
        type: string
        description: A unique identifier.
      ontologyName:
        type: string
        description: The name of the ontology this tag data is contained in.
      ontologyVersion:
        type: string
        description: The version of the ontology this tag data is contained in.

  SubSampleInfo:
    description: Information about RSpace inventory SubSample
    allOf:
      - $ref: '#/definitions/MovableInventoryRecordInfo'
  SubSample:
    description: Full details of RSpace inventory SubSample
    allOf:
      - $ref: '#/definitions/SubSampleInfo'
      - properties:
          sample:
            $ref: '#/definitions/SampleInfo'
          extraFields:
            $ref: '#/definitions/ExtraFieldList'
          notes:
            $ref: '#/definitions/SubSampleNoteList'
  SubSampleList:
    description: List of the subsample information objects
    type: array
    items:
      $ref: '#/definitions/SubSampleInfo'

  SubSampleNote:
    description: Full details of RSpace inventory SubSample
    properties:
      created:
        type: string
        format: date-time
        description: The creation time of the Sample.
      createdBy:
        $ref: '#/definitions/User'
      content:
        type: string
        description: content of the note
        example: <p>test note</p>
  SubSampleNoteList:
    description: List of the subsample notes
    type: array
    items:
      $ref: '#/definitions/SubSampleNote'

  SubSampleSplit:
    description: Configure duplication behaviour.
    allOf:
      - properties:
          numSubSamples:
            type: integer
            format: int64
            description: The number of subsamples you require, including the original.
          split:
            type: boolean
            description: Whether to split the quantity equally amongst copies, or not.
    example:
      numSubSamples: 2
      split: true

  TagList:
    description: List of the tag information objects
    type: array
    items:
      $ref: '#/definitions/ApiTagInfo'

  ContainerInfo:
    description: Basic information about Inventory Container.
    allOf:
      - $ref: '#/definitions/MovableInventoryRecordInfo'
      - properties:
          locationsCount:
            type: number
            description: Number of defined locations in the container
          contentSummary:
            description: Summary information about content of the container
            properties:
              totalCount:
                type : number
                description: Total number of items stored directly in this container
              subSamplesCount:
                type : number
                description: Number of subsamples stored directly in this container
              containerCount:
                type : number
                description:  Number of containers stored directly in this container
          cType:
            type: string
            description: container type, one of LIST / GRID / IMAGE
          gridLayout:
            description: Information about the grid layout (GRID containers only)
            properties:
              columnsNumber:
                type : number
                description: Number of subsamples stored directly in this container
              rowsNumber:
                type : number
                description: Number of subsamples stored directly in this container
              columnsLabelType:
                type: string
                description: Columns naming mode one of ABC, CBA, N123, N321
                enum:
                  - ABC
                  - CBA
                  - N123
                  - N321
              rowsLabelType:
                type: string
                description: Rows naming mode, one of ABC, CBA, N123, N321
                enum:
                  - ABC
                  - CBA
                  - N123
                  - N321
          canStoreSamples:
            type: boolean
            description: Whether object represents a historical, or latest, version of the sample
          canStoreContainers:
            type: boolean
            description: Whether object represents a historical, or latest, version of the sample
  Container:
    description: A Cntainer with extra fields, locations, and content
    example:
      name: My Container
      cType: LIST
    allOf:
      - $ref: '#/definitions/ContainerInfo'
      - properties:
          extraFields:
            $ref: '#/definitions/ExtraFieldList'
          locations:
            $ref: '#/definitions/ContainerLocationList'
  ContainerList:
    description: List of the container information objects
    type: array
    items:
      $ref: '#/definitions/ContainerInfo'

  ContainerLocationInfo:
    description: Info on location within the container
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier of the location.
        example: 32127
      coordX:
        type: number
        description: First coordinate of the location within the container
        example: 4
      coordY:
        type: number
        description: Second coordiante of the location within the container
        example: 1
  ContainerLocationList:
    description: List of container locations
    type: array
    items:
      $ref: '#/definitions/ContainerLocationInfo'

  SampleTemplateInfo:
    description: Summary information about a Sample Template.
    allOf:
      - $ref: '#/definitions/SampleInfo'
      - properties:
          type:
            example: SAMPLE_TEMPLATE
          defaultUnitId:
            type: integer
            description: The id of a template unit, from the /units endpoint
  SampleTemplateList:
    description: List of the fields in a Sample or SubSample
    type: array
    items:
      $ref: '#/definitions/SampleTemplateInfo'

  SampleTemplate:
    description: Full information about Inventory SampleTemplate
    allOf:
      - $ref: '#/definitions/SampleTemplateInfo'
      - properties:
          fields:
            $ref: '#/definitions/SampleFieldList'


  SampleTemplatePost:
    description: 'Definition of a new SampleTemplate, including fields'
    properties:
      name:
        type: string
        description: A required display name for the template/
        minLength: 1
      defaultUnitId:
        type: integer
        description: The id of a unit to measure the amount of the sample. (A mass, volume or dimensionless unit from /units )
      subSampleAlias:
        description: Alias to use for describing a single or multiple subsamples of this sample
        properties:
          alias:
            type : string
          plural:
            type : string
      tags:
        $ref: '#/definitions/TagList'
      fields:
        $ref: '#/definitions/SampleFieldList'
    example:
      name: Restriction enzyme.
      description: A template for commercial restriction enzymes used in our lab
      tags: 'enzyme, molbiol'
      subSampleAlias:
        alias: subsample
        plural: subsamples
      defaultUnitId: 3
      sampleSource: VENDOR_SUPPLIED
      fields:
        - name: Recognition sequence length
          type: Radio
          definition:
            options: [ '4', '6', '8', 'other']
        - name: Incubation Temperature (C)
          type: Number
          content: 37
        - name: Cut-type
          type: Radio
          definition:
            options: [ 'Blunt', 'Overhanging' ]
        - name: Recognition Site
          type: String
        - name: Vendor
          type: Radio
          definition:
            options: [ 'Invitrogen', 'NEB', 'Amersham', 'Sigma']
          selectedOptions: ['Amersham']
        - name: Webpage
          type: URI

  Quantity:
    description: A quantity of something, described as a decimal value and a unit.
    properties:
      numericValue:
        type: number
        description: decimal number of any precision
      unitId:
        type: integer
        description: id of a quantity unit

  SampleField:
    description: |
      A field in a sample or subsample.
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier for the SampleField
      globalId:
        type: string
        description: A unique identifier amongst all RSpace data types.
      name:
        type: string
        description: The name of the field.
      lastModified:
        type: string
        format: date-time
        description: The last modified time of this SampleField, in ISO-8601 format.
      type:
        type: string
        description: The data type of this field
        enum:
          - string
          - text
          - choice
          - radio
          - date
          - number
          - time
          - attachment
          - reference
          - uri
      content:
        type: string
        description: |
          The content as a string. For SampleFields of type 'text' this will be HTML.
      definition:
        type : object
        description: Some field types require a definition - e.g. radio/choice fields must show what are valid choice options
        properties:
          options:
            type: array
            description: The possible values defined for this field
            items:
              type: string
          multiple:
            type: boolean
            description: Whether multiple values are allowed (choice fields only).
      selectedOptions:
        type: array
        description: list of selected values for radio/choice field
        items:
          type: string
  SampleFieldList:
    description: List of the fields in a Sample
    type: array
    items:
      $ref: '#/definitions/SampleField'

  ExtraField:
    description: Information about extra field.
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier for the ExtraField.
      globalId:
        type: string
        description: A unique identifier amongst all RSpace data types.
      type:
        type: string
        description: The type of the field, allowed values are 'text' or 'number'.
      name:
        type: string
        description: The name of the field.
      content:
        type: string
        description: Current content of the field.
      parentGlobalId:
        type: string
        description: A unique identifier amongst all RSpace data types.
    required: [ parentGlobalId ]
    example:
      type: text
      name: My Field
      content: My string field content
      parentGlobalId: SA1342
  ExtraFieldList:
    description: List of the extra fields of inventory record
    type: array
    items:
      $ref: '#/definitions/ExtraField'

  Barcode:
    description: Information about item's barcode.
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier for the Barcode.
      data:
        type: string
        description: Data encoded by the barcode
      format:
        type: string
        description: (optional) The format of barcode, could be 'QR' or 'BARCODE'.
      description:
        type: string
        description: Additional information about the barcode
      created:
        type: string
        format: date-time
        description: >-
          The creation time of the file (the time it was first uploaded to
          RSpace), in ISO-8601 format.
      createdBy:
        type: string
        description: Username of the user who created the barcode

  BarcodeList:
    description: List of barcodes
    type: array
    items:
      $ref: '#/definitions/Barcode'

  File:
    description: >-
      Metadata for an image, attachment or linked resource object, but without its binary data.
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier for the File item.
        example: 32768
      globalId:
        type: string
        description: A unique identifier amongst all RSpace data types.
        example: IF32768
      name:
        type: string
        description: File name of the attachment.
        example: "bright_sky.jpg"
      parentGlobalId:
        type: string
        description: Unique identifier of the parent inventory record.
        example: SA3242
      type:
        type: string
        description: RSpace-type of the attachment.
        enum:
          - GENERAL
          - CHEMICAL
      contentMimeType:
        type: string
        description: Mime-type of the attachment.
        example: image/jpeg
      extension:
        type: string
        description: File extension.
        example: jpg
      size:
        type: integer
        format: int64
        description: 'Size, in bytes, of the file.'
        example: 3178259
      created:
        type: string
        format: date-time
        description: >-
          The creation time of the file (the time it was first uploaded to
          RSpace), in ISO-8601 format.
      createdBy:
        type: string
        description: Username of the attachment's creator.
        example: "robday"
      deleted:
        type: boolean
        description: Whether item is deleted or not.
      _links:
        $ref: '#/definitions/LinkItemList'
  FileList:
    description: List of file attachments
    type: array
    items:
      $ref: '#/definitions/File'

  Job:
    description: A Job with an additional result object. A job still  in ''RUNNING'' state  will have a null result object.
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier for the Job
      status:
        type: string
        description: 'Current status of the job, such as ''RUNNING'' or  ''COMPLETED'' '
      percentComplete:
        type: number
        description: Reports progress of the job, as a percentage of completion. For a completed job, will be 100%.

  LinkItemList:
    description: >
      List of metadata links. Usually contains 'self' link, for paginated result
      also 'next', 'prev', 'first' and 'last' links.
    type: array
    minItems: 0
    items:
      $ref: '#/definitions/LinkItem'
  LinkItem:
    description: A metadata link.
    properties:
      link:
        type: string
        description: URL.
      rel:
        type: string
        description: >
          The relation, an IANA registered relation type as listed
          https://www.iana.org/assignments/link-relations/link-relations.xml
    example:
      link: 'https://myrspace.com/api/inventory/v1/files/123'
      type: self
  User:
    description: Representation of a User.
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier for the User.
        example: 23
      username:
        type: string
        description: Unique username for the User.
        minLength: 6
        example: fbloggs
      email:
        type: string
        description: Email address for User.
        pattern: \S+@\S+
        example:  bloggs@uni.edu
      firstName:
        type: string
        description: First name of the User.
        example: Fred
      lastName:
        type: string
        description: Last name of the User.
        example: Bloggs
      homeFolderId:
        type: number
        description: The id of the home ELN folder. May be empty if account has not yet been initialised.
        example: 24556
      workbenchId:
        type: number
        description: The id of the user's Inventory Workbench. May be empty if account has not yet been initialised.
        example: 24557

  GroupInfo:
    description: Basic information about a LabGroup.
    properties:
      id:
        type: integer
        format: int64
        description: Unique identifier of the Group.
        example: 32127
      globalId:
        type: string
        description: Unique globalId of the Group.
        example: GP32127
      name:
        type: string
        description: Name of the group.
        example:  "userGroup 1"
      uniqueName:
        type: string
        description: Unique (RSpace-generated) name of the group.
        example: "userGroup1kPV"
  GroupShareInfo:
    properties:
      group:
        $ref: '#/definitions/GroupInfo'
      shared:
        type: boolean
        description: whether item is shared with this group
      itemOwnerGroup:
        type: boolean
        description: whether item's owner belong to the group
  GroupShareInfoList:
    description: List of group sharing information for the inventory item
    type: array
    items:
      $ref: '#/definitions/GroupShareInfo'

  Error:
    description: Error object
    properties:
      status:
        type: string
        description: Text representation of Http Status Code.
      httpCode:
        type: integer
        description: HttpStatusCode
      internalCode:
        type: integer
        description: Internal error code to report to RSpace API support team.
      message:
        type: string
        description: Human-readable error message
      errors:
        description: Optional information on errors on individual fields.
        type: array
        items:
          type: string
    example:
      httpCode: 422
      internalCode: 42201
      message: Query could not be processed.
parameters:
  timeStampParam:
    name: timestamp
    in: path
    type: string
    required: true
    description: Ignored by RSpace server; can be any string. Applications using caching can use the timestamp to determine if to reload.
  sampleIdParam:
    name: sampleId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the sample.
  sampleBodyParam:
    name: sample
    in: body
    description: 'A Sample object'
    required: true
    schema:
      $ref: '#/definitions/Sample'
  subSampleIdParam:
    name: subSampleId
    in: path
    type: integer
    format: int64
    required: true
    description: An identifier of the subsample.
  subSampleBodyParam:
    name: subSample
    in: body
    description: 'A SubSample object'
    required: true
    schema:
      $ref: '#/definitions/SubSample'
  subSampleNoteBodyParam:
    name: subSampleNote
    in: body
    description: 'A SubSample note'
    required: true
    schema:
      $ref: '#/definitions/SubSampleNote'
  subSampleSplitParam:
    name: subSampleSplit
    in: body
    description: 'Configuration of duplication behaviour for subsamples'
    required: false
    schema:
      $ref: '#/definitions/SubSampleSplit'
  revisionIdParam:
    name: revisionId
    in: path
    type: integer
    format: int64
    required: true
    description: A revision number of the inventory item
  versionParam:
    name: version
    in: path
    type: integer
    format: int64
    required: true
    description: A version number of the inventory item
  extraFieldIdParam:
    name: extraFieldId
    in: path
    type: integer
    format: int64
    required: true
    description: An identifier of the extra field.
  extraFieldBodyParam:
    name: extraField
    in: body
    description: 'An extra field object'
    required: true
    schema:
      $ref: '#/definitions/ExtraField'
  sampleTemplateIdParam:
    name: sampleTemplateId
    in: path
    type: integer
    format: int64
    required: true
    description: An identifier of the sample template.
  workbenchIdParam:
    name: workbenchId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the workbench.
  containerIdParam:
    name: containerId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the container.
  containerBodyParam:
    name: container
    in: body
    description: 'A Container object'
    required: true
    schema:
      $ref: '#/definitions/Container'
  queryParam:
    name: query
    in: query
    description: Global search query for inventory recods. Required, unless 'parentGlobalId' parameter is provided.
    type: string
  resultTypeParam:
    name: resultType
    in: query
    description: Optional subtype of requested inventory items.
    type: string
    enum:
      - SAMPLE
      - SUBSAMPLE
      - CONTAINER
      - TEMPLATE
  deletedItemsParam:
    name: deletedItems
    in: query
    description: Option deciding about inclusion of deleted items in results (default is EXCLUDED i.e. deleted items are not returned).
    type: string
    enum:
      - EXCLUDE
      - INCLUDE
      - DELETED_ONLY
  globalIdParam:
    name: globalId
    in: path
    type: string
    required: true
    description: A global identifier of the Inventory item.
  parentGlobalIdParam:
    name: parentGlobalId
    in: query
    type: string
    description: Must be a global id of a Container (IC), Workbench (BE), Sample (SA), or Sample Template (IT).
      Limits the results to items being stored inside a container (or workbench), to
      subsamples of a given sample, or to samples created from given template.
  docIdParam:
    name: docId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the ELN document.
  elnFieldIdParam:
    name: elnFieldId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the field within ELN document.
  inventoryFileIdParam:
    name: fileId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the inventory file.
  digitalObjectIdentifierIdParam:
    name: doiId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the digital inventory identifier.
  lomIdParam:
    name: lomId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the list of materials.
  listOfMaterialsBodyParam:
    name: listOfMaterialsBody
    in: body
    description: Details of inventory item usage within an ELN document
    required: true
    schema:
      example:
        name: list A
        description: Subsample X from container Y, used in step N of the experiment.
        elnFieldId: 1025
        materials:
          - invRec: { id: 123, type: "SUBSAMPLE" }
            usedQuantity: { unitId: 3, numericValue: 5 }
          - invRec: { id: 52, type: "CONTAINER" }
            usedQuantity: null
  inventorySettingsBodyParam:
    name: inventorySettingsBody
    in: body
    description: Settings to update
    required: true
    schema:
      example:
        datacite:
          serverUrl: "https://api.test.datacite.org/"
          username: "AJFO.JIJEMD"
          password: "<AJFO.JIJEMD password>"
          repositoryPrefix: "10.82316"
          enabled: "true"
  basketIdParam:
    name: basketId
    in: path
    type: integer
    format: int64
    required: true
    description: A unique identifier of the basket.
  basketPostParam:
    name: basketPost
    in: body
    description: Details to use for creation of new basket
    schema:
      example:
        name: list A
        globalIds:
          - "SA123"
          - "SS234"
          - "IC12"
  basketBodyParam:
    name: basketBody
    in: body
    description: Details of basket to create or update
    required: true
    schema:
      example:
        name: list A
  basketItemsParam:
    name: basketItems
    in: body
    description: Object listing global ids of basket items
    required: true
    schema:
      example:
        globalIds:
          - "SA123"
          - "SS234"
          - "IC12"
  publicLinkParam:
    name: publicLink
    in: path
    type: string
    required: true
    description: A public link of an inventory item
  pageNumberParam:
    name: pageNumber
    in: query
    description: 'For paginated results, this is the number of the page requested, 0 based.'
    type: integer
    format: int32
    default: 0
    minimum: 0
  pageSizeParam:
    name: pageSize
    in: query
    description: The maximum number of items to retrieve.
    type: integer
    format: int32
    default: 20
    minimum: 1
    maximum: 50
  orderByParam:
    name: orderBy
    in: query
    description: Sort order for inventory items.
    type: string
    enum:
      - name asc
      - name desc
      - type asc
      - type desc
      - globalId asc
      - globalId desc
      - creationDate asc
      - creationDate desc
      - modificationDate asc
      - modificationDate desc
    default: name asc
  ownedByParam:
    name: ownedBy
    in: query
    description: Username of the owner of requested items
    type: string
  bulkOperationBodyParam:
    name: bulkOperationBody
    in: body
    description: Details of bulk operation
    required: true
    schema:
      example:
        operationType: CREATE
        rollbackOnError: true
        records:
          - type: SAMPLE
            name: mySample
          - type: CONTAINER
            cType: LIST
            name: myContainer
responses:
  UnprocessableQuery:
    description: Query could not be processed.
    schema:
      $ref: '#/definitions/Error'
  NotFound:
    description: Resource could not be found - either does not exist, or client is not authorised.
    schema:
      $ref: '#/definitions/Error'
  TooManyRequests:
    description: Too many requests - see the X-Rate-Limit headers for more information.
    schema:
      $ref: '#/definitions/Error'
  LicenseProblem:
    description: License expired or not active.
    schema:
      $ref: '#/definitions/Error'
